http://jira.biyao.com/browse/HYSDK-104



#### 一、前端与网关接口设计规范：http://wiki.biyao.com/pages/viewpage.action?pageId=34259919

1. 重点关注返回值为空的情况
2. 能使用String类型的就不要使用number类型
3. 异常提示信息放在error.message中
4. 老版本返回值即使不符合规范，也不要随意修改，前端老版本代码无法配合改动

---


#### 二、网关规范中引用的移动开发部wiki接口设计规范：http://wiki.biyao.com/pages/viewpage.action?pageId=15566614

1. 接口出参，如不在备注中特殊说明可不传或可以为空，则一律为必传参数，且参数值不能为空（空：null、"null"、""、''、{}、[]、字段缺失）
2. 同一个接口的同名出参和入参，若无特殊说明，出参的含义和值与入参完全相同
3. 如果接口出参，没有有效值，则按照以下规范来返回：
	- string 默认值为 ""
	- object 默认值为 {}
	- array  默认值为 []
	- number 默认值为 "0"
4. 注意事项：
	- null、true、false这三种关键字不使用
	- 数字作为int类型返回可能导致超出表示范围解析异常（如衍生商品suid)。故展示类数字要求以字符串返回，没有数据时返回 ""
	- 用于计算金额的字段：元、分 两种单位各返回一份
	- 用于计算时间的字段：秒、毫秒 各返回一份
	- 用于表示类型的字段：没有值时，必须返回一个默认类型
	- 特殊符号全角/半角处理：以prd描述为准、保持统一
	- 不可以在数组节点中直接返回或是以字符串返回null，字段值为"null"的情况除外
	- 图片url必须为https协议
	- 小程序二维码背景必须透明
	- 数据异常时，error中只可包含message、code，不能再放其他内容
	- 代表开关的字段，默认使用"0"代表关闭（否），"1"代表打开（是），不可混淆含义

---

#### 三、小程序接口文档规范：http://wiki.biyao.com/pages/viewpage.action?pageId=34257906

标红注意事项：**所有下发的链接地址必须为https协议，禁止出现http协议地址**

其他内容：

1. 接口返回数据即显示，前端仅做渲染逻辑处理
2. 渲染逻辑禁止跨多个接口调用
3. 修改返回值的某一个对象里面的字段时，要把该对象里所有的字段都罗列出来，说明其含义及是否修改，避免受到其他字段的影响

---

#### 四、移动开发部接口设计规范参考升级草案：http://wiki.biyao.com/pages/viewpage.action?pageId=34266110

1. 字段名设计建议：
   - 使用统一的业务名词（如goods/product，统一为其中之一，业务名词参考http://wiki.biyao.com/pages/viewpage.action?pageId=34266104）
   - 使用小驼峰命名
   - 合理对字段分组，方便拓展易于维护（例如tel、nickName等统一聚合到userInfo中）
   - 当字段意义改变时，不可再用老字段，需开辟新字段，避免误用
   - 对于通用的字段，需要形容词+名词形式，明确字段含义（例如imgUrl可以具体为bgImageUrl）
2. 对于数值，需要有明确的单位（秒、毫秒、元、分等）
3. 需要API生成的图片，在接口设计文档中标出PRD中未说明但UED中新增的约束，请API同事实现具体视觉约束（PRD约束+UED约束），也请产品、UED和测试注意验收
